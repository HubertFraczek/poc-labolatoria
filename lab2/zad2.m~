clearvars; close all; clc;

%% inicjalizacja zmiennych
I = imread("parrot.bmp");
% wejsciowe zdjęcie
figure(1);
imshow(I);

% skala x i y
yReScale = 1.5;
xReScale = 1.5;

% rozdzielczość obrazu wejsciowego
[YY, XX] = size(I);

% nowa rozdzielczość
nYY = round(YY * yReScale);
nXX = round(XX * xReScale);

% macierz o wymierach nYY i nXX wypełniona zerami
nI = uint8(zeros(nYY, nXX));

% krok skalowania
xStep = XX / nXX;
yStep = YY / nYY;

%% proces skalowania
for ii = 0 : nYY - 1
   for jj = 0 : nXX - 1
       % punkt A
       i1 = round(ii * xStep);
       j1 = round(jj * yStep);
       
       % punkt B
       i2 = i1 + 1;
       % j1
       
       % punkt C
       % i2
       j2 = j1 + 1;
       
       % punkt D
       % i1
       % j2
        
       % obsługa skrajnych przypadków
       if (i2 > nYY - 1)
          i2 = nYY - 1;
       end
       if (j2 > nXX - 1)
           j2 = nXX - 1;
       end
       %%%%%%%%%%%% asdf 
       fa = double(I(j1, i1 + 1));
       fb = double(I(j1 + 1, i2));
       fc = double(I(j2, i2));
       fd = double(I(j2, i1 + 1));
       
       nI(jj + 1, ii + 1) = [(1 - (i2 - i1) / 2) ((i2 - i1) / 2)] * [fa fd; fb fc] * [(1 - (j2 - j1) / 2); ((j2 - j1) / 2)];
   end
end

% wyświetlenie wyjsciowego obrazu
figure(2);
imshow(nI);
